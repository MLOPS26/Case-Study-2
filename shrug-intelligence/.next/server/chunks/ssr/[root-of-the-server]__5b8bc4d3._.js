module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)(""),[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)("main"),u=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000",v=async()=>{if(a){r(!0);try{let b=new FormData;b.append("email",a);let c=await fetch(`${u}/users`,{method:"POST",body:b}),d=await c.json();f(d.uuid)}catch(a){console.error("Error creating user:",a)}r(!1)}},w=async a=>{if(a.preventDefault(),i&&g&&e){r(!0),n("");try{let a=new FormData;a.append("file",i),a.append("question",g),a.append("user_uuid",e);let b=await fetch(`${u}/inference`,{method:"POST",body:a}),c=await b.json();n(c.response),h(""),j(null),l(null)}catch(a){console.error("Error:",a),n("Error processing request")}r(!1)}},x=async()=>{if(e){r(!0);try{let a=await fetch(`${u}/history/${e}`),b=await a.json();p(b),t("history")}catch(a){console.error("Error loading history:",a)}r(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-white text-black",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-8 py-16",children:[(0,b.jsxs)("header",{className:"text-center mb-16 border-b-2 border-black pb-8",children:[(0,b.jsx)("h1",{className:"text-6xl font-bold mb-4",children:"¯\\_(ツ)_/¯"}),(0,b.jsx)("h2",{className:"text-2xl font-mono",children:"SHRUG INTELLIGENCE"}),(0,b.jsx)("p",{className:"text-sm mt-2 font-mono",children:"minimal math tutor"})]}),!e&&(0,b.jsxs)("div",{className:"border-2 border-black p-8 mb-8",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4 font-mono",children:"START"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("input",{type:"email",placeholder:"email",value:a,onChange:a=>d(a.target.value),className:"flex-1 border-2 border-black px-4 py-2 font-mono bg-white"}),(0,b.jsx)("button",{onClick:v,disabled:q||!a,className:"px-6 py-2 bg-black text-white font-mono hover:bg-gray-800 disabled:bg-gray-400",children:q?"...":"GO"})]})]}),e&&"main"===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 flex justify-between items-center border-b-2 border-black pb-4",children:[(0,b.jsxs)("p",{className:"font-mono text-sm",children:["user: ",e.substring(0,8),"..."]}),(0,b.jsx)("button",{onClick:x,className:"px-4 py-1 border-2 border-black font-mono hover:bg-black hover:text-white",children:"HISTORY"})]}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"border-2 border-black p-8",children:[(0,b.jsx)("label",{className:"block font-mono font-bold mb-4",children:"IMAGE"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){j(b);let a=new FileReader;a.onloadend=()=>{l(a.result)},a.readAsDataURL(b)}},className:"block w-full font-mono text-sm file:mr-4 file:py-2 file:px-4 file:border-2 file:border-black file:bg-white file:font-mono hover:file:bg-black hover:file:text-white"}),k&&(0,b.jsx)("div",{className:"mt-4 border-2 border-black p-4",children:(0,b.jsx)("img",{src:k,alt:"Preview",className:"max-w-full h-auto"})})]}),(0,b.jsxs)("div",{className:"border-2 border-black p-8",children:[(0,b.jsx)("label",{className:"block font-mono font-bold mb-4",children:"QUESTION"}),(0,b.jsx)("textarea",{value:g,onChange:a=>h(a.target.value),placeholder:"what is this problem asking?",className:"w-full border-2 border-black px-4 py-2 font-mono h-24 bg-white"})]}),(0,b.jsx)("button",{type:"submit",disabled:q||!i||!g,className:"w-full py-4 bg-black text-white font-mono text-xl hover:bg-gray-800 disabled:bg-gray-400",children:q?"THINKING...":"SOLVE"})]}),m&&(0,b.jsxs)("div",{className:"mt-8 border-2 border-black p-8",children:[(0,b.jsx)("h3",{className:"font-mono font-bold mb-4",children:"RESPONSE"}),(0,b.jsx)("div",{className:"font-mono whitespace-pre-wrap",children:m})]})]}),e&&"history"===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 flex justify-between items-center border-b-2 border-black pb-4",children:[(0,b.jsx)("h3",{className:"font-mono font-bold text-xl",children:"HISTORY"}),(0,b.jsx)("button",{onClick:()=>t("main"),className:"px-4 py-1 border-2 border-black font-mono hover:bg-black hover:text-white",children:"BACK"})]}),0===o.length?(0,b.jsx)("div",{className:"border-2 border-black p-8 text-center font-mono",children:"no history yet ¯\\_(ツ)_/¯"}):(0,b.jsx)("div",{className:"space-y-4",children:o.map((a,c)=>(0,b.jsxs)("div",{className:"border-2 border-black p-6",children:[(0,b.jsx)("div",{className:"font-mono text-sm mb-2 opacity-60",children:new Date(a.timestamp).toLocaleString()}),a.image_path&&(0,b.jsx)("div",{className:"mb-4 border-2 border-black p-2",children:(0,b.jsx)("img",{src:`${u}/${a.image_path}`,alt:"Question",className:"max-w-full h-auto"})}),(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("span",{className:"font-bold font-mono",children:"Q:"}),(0,b.jsx)("span",{className:"font-mono ml-2",children:a.question})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-bold font-mono",children:"A:"}),(0,b.jsx)("div",{className:"font-mono ml-4 mt-2 whitespace-pre-wrap",children:a.response})]})]},c))})]})]})})}a.s(["default",()=>d])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5b8bc4d3._.js.map