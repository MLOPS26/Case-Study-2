{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport { useState } from 'react';\n\nexport default function Home() {\n  const [email, setEmail] = useState('');\n  const [userUuid, setUserUuid] = useState('');\n  const [question, setQuestion] = useState('');\n  const [file, setFile] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [response, setResponse] = useState('');\n  const [history, setHistory] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [view, setView] = useState<'main' | 'history'>('main');\n\n// should throw this somewhere else\n  const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:8000';\n\n  const handleCreateUser = async () => {\n    if (!email) return;\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append('email', email);\n      const res = await fetch(`${BACKEND_URL}/users`, {\n        method: 'POST',\n        body: formData,\n      });\n      const data = await res.json();\n      setUserUuid(data.uuid);\n    } catch (error) {\n      console.error('Error creating user:', error);\n    }\n    setLoading(false);\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile) {\n      setFile(selectedFile);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(selectedFile);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!file || !question || !userUuid) return;\n\n    setLoading(true);\n    setResponse('');\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('question', question);\n      formData.append('user_uuid', userUuid);\n\n      const res = await fetch(`${BACKEND_URL}/inference`, {\n        method: 'POST',\n        body: formData,\n      });\n\n      const data = await res.json();\n      setResponse(data.response);\n      setQuestion('');\n      setFile(null);\n      setImagePreview(null);\n    } catch (error) {\n      console.error('Error:', error);\n      setResponse('Error processing request');\n    }\n\n    setLoading(false);\n  };\n\n  const handleLoadHistory = async () => {\n    if (!userUuid) return;\n    setLoading(true);\n    try {\n      const res = await fetch(`${BACKEND_URL}/history/${userUuid}`);\n      const data = await res.json();\n      setHistory(data);\n      setView('history');\n    } catch (error) {\n      console.error('Error loading history:', error);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white text-black\">\n      <div className=\"max-w-2xl mx-auto px-8 py-16\">\n        <header className=\"text-center mb-16 border-b-2 border-black pb-8\">\n          <h1 className=\"text-6xl font-bold mb-4\">¯\\_(ツ)_/¯</h1>\n          <h2 className=\"text-2xl font-mono\">SHRUG INTELLIGENCE</h2>\n          <p className=\"text-sm mt-2 font-mono\">minimal math tutor</p>\n        </header>\n\n        {!userUuid && (\n          <div className=\"border-2 border-black p-8 mb-8\">\n            <h3 className=\"text-xl font-bold mb-4 font-mono\">START</h3>\n            <div className=\"flex gap-4\">\n              <input\n                type=\"email\"\n                placeholder=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"flex-1 border-2 border-black px-4 py-2 font-mono bg-white\"\n              />\n              <button\n                onClick={handleCreateUser}\n                disabled={loading || !email}\n                className=\"px-6 py-2 bg-black text-white font-mono hover:bg-gray-800 disabled:bg-gray-400\"\n              >\n                {loading ? '...' : 'GO'}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {userUuid && view === 'main' && (\n          <>\n            <div className=\"mb-4 flex justify-between items-center border-b-2 border-black pb-4\">\n              <p className=\"font-mono text-sm\">user: {userUuid.substring(0, 8)}...</p>\n              <button\n                onClick={handleLoadHistory}\n                className=\"px-4 py-1 border-2 border-black font-mono hover:bg-black hover:text-white\"\n              >\n                HISTORY\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"border-2 border-black p-8\">\n                <label className=\"block font-mono font-bold mb-4\">IMAGE</label>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleFileChange}\n                  className=\"block w-full font-mono text-sm file:mr-4 file:py-2 file:px-4 file:border-2 file:border-black file:bg-white file:font-mono hover:file:bg-black hover:file:text-white\"\n                />\n                {imagePreview && (\n                  <div className=\"mt-4 border-2 border-black p-4\">\n                    <img src={imagePreview} alt=\"Preview\" className=\"max-w-full h-auto\" />\n                  </div>\n                )}\n              </div>\n\n              <div className=\"border-2 border-black p-8\">\n                <label className=\"block font-mono font-bold mb-4\">QUESTION</label>\n                <textarea\n                  value={question}\n                  onChange={(e) => setQuestion(e.target.value)}\n                  placeholder=\"what is this problem asking?\"\n                  className=\"w-full border-2 border-black px-4 py-2 font-mono h-24 bg-white\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading || !file || !question}\n                className=\"w-full py-4 bg-black text-white font-mono text-xl hover:bg-gray-800 disabled:bg-gray-400\"\n              >\n                {loading ? 'THINKING...' : 'SOLVE'}\n              </button>\n            </form>\n\n            {response && (\n              <div className=\"mt-8 border-2 border-black p-8\">\n                <h3 className=\"font-mono font-bold mb-4\">RESPONSE</h3>\n                <div className=\"font-mono whitespace-pre-wrap\">{response}</div>\n              </div>\n            )}\n          </>\n        )}\n\n        {userUuid && view === 'history' && (\n          <>\n            <div className=\"mb-4 flex justify-between items-center border-b-2 border-black pb-4\">\n              <h3 className=\"font-mono font-bold text-xl\">HISTORY</h3>\n              <button\n                onClick={() => setView('main')}\n                className=\"px-4 py-1 border-2 border-black font-mono hover:bg-black hover:text-white\"\n              >\n                BACK\n              </button>\n            </div>\n\n            {history.length === 0 ? (\n              <div className=\"border-2 border-black p-8 text-center font-mono\">\n                no history yet ¯\\_(ツ)_/¯\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {history.map((item, idx) => (\n                  <div key={idx} className=\"border-2 border-black p-6\">\n                    <div className=\"font-mono text-sm mb-2 opacity-60\">\n                      {new Date(item.timestamp).toLocaleString()}\n                    </div>\n                    {item.image_path && (\n                      <div className=\"mb-4 border-2 border-black p-2\">\n                        <img\n                          src={`${BACKEND_URL}/${item.image_path}`}\n                          alt=\"Question\"\n                          className=\"max-w-full h-auto\"\n                        />\n                      </div>\n                    )}\n                    <div className=\"mb-2\">\n                      <span className=\"font-bold font-mono\">Q:</span>\n                      <span className=\"font-mono ml-2\">{item.question}</span>\n                    </div>\n                    <div>\n                      <span className=\"font-bold font-mono\">A:</span>\n                      <div className=\"font-mono ml-4 mt-2 whitespace-pre-wrap\">\n                        {item.response}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}