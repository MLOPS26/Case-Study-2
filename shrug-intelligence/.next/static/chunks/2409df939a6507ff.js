(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,t,s)=>{"use strict";var a=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;s.c=function(e){return a.H.useMemoCache(e)}},932,(e,t,s)=>{"use strict";t.exports=e.r(79474)},31713,e=>{"use strict";var t=e.i(47167),s=e.i(43476),a=e.i(932),l=e.i(71645);function o(){let e,o,r,n,c,i,m,d,b,h,x=(0,a.c)(34),[f,p]=(0,l.useState)(""),[u,N]=(0,l.useState)(""),[j,g]=(0,l.useState)(""),[y,v]=(0,l.useState)(null),[w,k]=(0,l.useState)(null),[S,_]=(0,l.useState)("");x[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],x[0]=e):e=x[0];let[E,T]=(0,l.useState)(e),[C,R]=(0,l.useState)(!1),[O,A]=(0,l.useState)("main"),I=t.default.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000";x[1]!==f?(o=async()=>{if(f){R(!0);try{let e=new FormData;e.append("email",f);let t=await fetch(`${I}/users`,{method:"POST",body:e}),s=await t.json();N(s.uuid)}catch(e){console.error("Error creating user:",e)}R(!1)}},x[1]=f,x[2]=o):o=x[2];let U=o;x[3]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{let t=e.target.files?.[0];if(t){v(t);let e=new FileReader;e.onloadend=()=>{k(e.result)},e.readAsDataURL(t)}},x[3]=r):r=x[3];let L=r;x[4]!==y||x[5]!==j||x[6]!==u?(n=async e=>{if(e.preventDefault(),y&&j&&u){R(!0),_("");try{let e=new FormData;e.append("file",y),e.append("question",j),e.append("user_uuid",u);let t=await fetch(`${I}/inference`,{method:"POST",body:e}),s=await t.json();_(s.response),g(""),v(null),k(null)}catch(e){console.error("Error:",e),_("Error processing request")}R(!1)}},x[4]=y,x[5]=j,x[6]=u,x[7]=n):n=x[7];let D=n;x[8]!==u?(c=async()=>{if(u){R(!0);try{let e=await fetch(`${I}/history/${u}`),t=await e.json();T(t),A("history")}catch(e){console.error("Error loading history:",e)}R(!1)}},x[8]=u,x[9]=c):c=x[9];let P=c;return x[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsxs)("header",{className:"text-center mb-16 border-b-2 border-black pb-8",children:[(0,s.jsx)("h1",{className:"text-6xl font-bold mb-4",children:"¯\\_(ツ)_/¯"}),(0,s.jsx)("h2",{className:"text-2xl font-mono",children:"SHRUG INTELLIGENCE"}),(0,s.jsx)("p",{className:"text-sm mt-2 font-mono",children:"minimal math tutor"})]}),x[10]=i):i=x[10],x[11]!==f||x[12]!==U||x[13]!==C||x[14]!==u?(m=!u&&(0,s.jsxs)("div",{className:"border-2 border-black p-8 mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4 font-mono",children:"START"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("input",{type:"email",placeholder:"email",value:f,onChange:e=>p(e.target.value),className:"flex-1 border-2 border-black px-4 py-2 font-mono bg-white"}),(0,s.jsx)("button",{onClick:U,disabled:C||!f,className:"px-6 py-2 bg-black text-white font-mono hover:bg-gray-800 disabled:bg-gray-400",children:C?"...":"GO"})]})]}),x[11]=f,x[12]=U,x[13]=C,x[14]=u,x[15]=m):m=x[15],x[16]!==y||x[17]!==P||x[18]!==D||x[19]!==w||x[20]!==C||x[21]!==j||x[22]!==S||x[23]!==u||x[24]!==O?(d=u&&"main"===O&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4 flex justify-between items-center border-b-2 border-black pb-4",children:[(0,s.jsxs)("p",{className:"font-mono text-sm",children:["user: ",u.substring(0,8),"..."]}),(0,s.jsx)("button",{onClick:P,className:"px-4 py-1 border-2 border-black font-mono hover:bg-black hover:text-white",children:"HISTORY"})]}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-2 border-black p-8",children:[(0,s.jsx)("label",{className:"block font-mono font-bold mb-4",children:"IMAGE"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:L,className:"block w-full font-mono text-sm file:mr-4 file:py-2 file:px-4 file:border-2 file:border-black file:bg-white file:font-mono hover:file:bg-black hover:file:text-white"}),w&&(0,s.jsx)("div",{className:"mt-4 border-2 border-black p-4",children:(0,s.jsx)("img",{src:w,alt:"Preview",className:"max-w-full h-auto"})})]}),(0,s.jsxs)("div",{className:"border-2 border-black p-8",children:[(0,s.jsx)("label",{className:"block font-mono font-bold mb-4",children:"QUESTION"}),(0,s.jsx)("textarea",{value:j,onChange:e=>g(e.target.value),placeholder:"what is this problem asking?",className:"w-full border-2 border-black px-4 py-2 font-mono h-24 bg-white"})]}),(0,s.jsx)("button",{type:"submit",disabled:C||!y||!j,className:"w-full py-4 bg-black text-white font-mono text-xl hover:bg-gray-800 disabled:bg-gray-400",children:C?"THINKING...":"SOLVE"})]}),S&&(0,s.jsxs)("div",{className:"mt-8 border-2 border-black p-8",children:[(0,s.jsx)("h3",{className:"font-mono font-bold mb-4",children:"RESPONSE"}),(0,s.jsx)("div",{className:"font-mono whitespace-pre-wrap",children:S})]})]}),x[16]=y,x[17]=P,x[18]=D,x[19]=w,x[20]=C,x[21]=j,x[22]=S,x[23]=u,x[24]=O,x[25]=d):d=x[25],x[26]!==E||x[27]!==u||x[28]!==O?(b=u&&"history"===O&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4 flex justify-between items-center border-b-2 border-black pb-4",children:[(0,s.jsx)("h3",{className:"font-mono font-bold text-xl",children:"HISTORY"}),(0,s.jsx)("button",{onClick:()=>A("main"),className:"px-4 py-1 border-2 border-black font-mono hover:bg-black hover:text-white",children:"BACK"})]}),0===E.length?(0,s.jsx)("div",{className:"border-2 border-black p-8 text-center font-mono",children:"no history yet ¯\\_(ツ)_/¯"}):(0,s.jsx)("div",{className:"space-y-4",children:E.map((e,t)=>(0,s.jsxs)("div",{className:"border-2 border-black p-6",children:[(0,s.jsx)("div",{className:"font-mono text-sm mb-2 opacity-60",children:new Date(e.timestamp).toLocaleString()}),e.image_path&&(0,s.jsx)("div",{className:"mb-4 border-2 border-black p-2",children:(0,s.jsx)("img",{src:`${I}/${e.image_path}`,alt:"Question",className:"max-w-full h-auto"})}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("span",{className:"font-bold font-mono",children:"Q:"}),(0,s.jsx)("span",{className:"font-mono ml-2",children:e.question})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold font-mono",children:"A:"}),(0,s.jsx)("div",{className:"font-mono ml-4 mt-2 whitespace-pre-wrap",children:e.response})]})]},t))})]}),x[26]=E,x[27]=u,x[28]=O,x[29]=b):b=x[29],x[30]!==m||x[31]!==d||x[32]!==b?(h=(0,s.jsx)("div",{className:"min-h-screen bg-white text-black",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-8 py-16",children:[i,m,d,b]})}),x[30]=m,x[31]=d,x[32]=b,x[33]=h):h=x[33],h}e.s(["default",()=>o])}]);